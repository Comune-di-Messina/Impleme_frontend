{"version":3,"sources":["main.js"],"names":["$","Drupal","behaviors","main","attach","context","settings","controller","ScrollMagic","Controller","not","each","$carousel","this","find","slick","arrows","autoplaySpeed","autoplay","addClass","slidesToShow","infinite","click","e","resize","refresh","$navPrev","$navNext","nextArrow","prevArrow","mobileFirst","responsive","breakpoint","dots","appendDots","preventDefault","fadeIn","fadeOut","removeClass","attr","hasClass","Scene","triggerElement","triggerHook","setPin","on","toggleClass","addTo","length","setTimeout","contentHeight","height","mapHeightNew","diffHeight","offset","duration","parent","prev","closest","magnificPopup","delegate","type","removalDelay","callbacks","beforeOpen","st","image","markup","replace","mainClass","el","tLoading","gallery","enabled","navigateByImgClick","preload","tError","titleSrc","item","off","position","top","animate","scrollTop","$title","prependTo","wrap","contents","unwrap","jQuery"],"mappings":"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","file":"../main.min.js","sourcesContent":["(function ($) {\n\n  Drupal.behaviors.main = {\n    attach: function (context, settings) {\n\n      var controller = new ScrollMagic.Controller();\n\n      // if ($('.primo-livello .nav-tabs').length > 0) {\n      //   // @TODO: review tabs structure.\n      //   $('<div class=\"tab-content\"><div class=\"tab-pane fade show active\" id=\"tab1\" role=\"tabpanel\" aria-labelledby=\"tab1-tab\"></div><div class=\"tab-pane fade\" id=\"tab2\" role=\"tabpanel\" aria-labelledby=\"tab2-tab\"></div></div>').insertAfter('.nav-tabs');\n      //   $('.view-servizi').prependTo('#tab1');\n      //   $('.view-target').appendTo('#tab2');\n      // }\n\n      // Frontpage - form.\n      // $('.block-pf-search .form-item').addClass('form-group');\n\n      // Carousel - hero.\n      $('.carousel-hero').not('.processed').each(function () {\n        var $carousel = $(this).find('.carousel-wrapper');\n        $carousel.slick({\n          arrows: false,\n          autoplaySpeed: 4000,\n          autoplay: true,\n        });\n        $(this).addClass('processed');\n      });\n\n      // Carousel - card.\n      $('.carousel-card').find('.carousel-wrapper').not('.processed').each(function () {\n        var $carousel = $(this);\n\n        $carousel.slick({\n          arrows: false,\n          slidesToShow: 1,\n          infinite: false,\n        });\n\n        $(this).addClass('processed');\n\n      });\n\n      $('[href=\"#servizi\"]').click(function (e) {\n        $('.carousel-servizi').resize().slick(\"getSlick\").refresh();\n      });\n      $('[href=\"#luoghi\"]').click(function (e) {\n        $('.carousel-luoghi').resize().slick(\"getSlick\").refresh();\n      });\n\n      // Carousel - teaser.\n      $('.carousel-teaser').not('.processed').each(function () {\n        var $carousel = $(this).find('.carousel-wrapper');\n        var $navPrev  = $(this).find('.carousel-prev');\n        var $navNext  = $(this).find('.carousel-next');\n        $carousel.slick({\n          infinite: false,\n          nextArrow: $navNext,\n          prevArrow: $navPrev,\n          slidesToShow: 1,\n          mobileFirst: true,\n          responsive: [\n            {\n              breakpoint: 768,\n              settings: {\n                slidesToShow: 2\n              }\n            },\n            {\n              breakpoint: 992,\n              settings: {\n                slidesToShow: 3\n              }\n            }\n          ]\n        });\n        $(this).addClass('processed');\n      });\n\n      // Carousel - gallery.\n      $('article .carousel-gallery').not('.processed').each(function () {\n        var $carousel = $(this).find('.carousel-wrapper');\n        var $navPrev  = $(this).find('.carousel-prev');\n        var $navNext  = $(this).find('.carousel-next');\n        $carousel.slick({\n          infinite: false,\n          nextArrow: $navNext,\n          prevArrow: $navPrev,\n          dots: true,\n          appendDots: $('.carousel-dots'),\n          slidesToShow: 1,\n          mobileFirst: true,\n          responsive: [\n            {\n              breakpoint: 576,\n              settings: {\n                slidesToShow: 2\n              }\n            },\n            {\n              breakpoint: 992,\n              settings: {\n                slidesToShow: 3\n              }\n            }\n          ]\n        });\n        $(this).addClass('processed');\n      });\n\n\n      // Search.\n      $('.search-link').click(function(e) {\n        e.preventDefault();\n        $('.search-overlay').fadeIn(200);\n        $('body').addClass('h-noscroll');\n      });\n\n      $('button.close').click(function(e) {\n        e.preventDefault();\n        $('.search-overlay').fadeOut(200);\n        $('body').removeClass('h-noscroll');\n      });\n      $('.search-overlay .form-text').attr('placeholder', 'Cerca nel sito');\n\n      // Header.\n      if (!$('body').hasClass('header-processed')) {\n\n        var scene = new ScrollMagic.Scene({\n          triggerElement: '.it-nav-wrapper',\n          triggerHook: 0\n        })\n        .setPin('.it-nav-wrapper')\n        .on(\"start end\", function (e) {\n          $('.it-header-wrapper').toggleClass('h-header-sticky');\n        })\n        .addTo(controller);\n        $('body').addClass('header-processed');\n      }\n\n      // Sticky sidebar.\n      if ($('.sticky-col').length > 0 && !$('body').hasClass('sidebar-processed')) {\n\n        setTimeout(function(){\n\n          var contentHeight = $('.col-cards').height();\n          var mapHeight = $('.leaflet-container').height();\n          var mapHeightNew = $('.geofield-google-map').height();\n          var diffHeight = contentHeight - mapHeightNew;\n\n          if (diffHeight > 0 ) {\n\n            var scene = new ScrollMagic.Scene({\n              triggerElement: '.sticky-col',\n              triggerHook: 0,\n              offset: -120,\n              duration: diffHeight\n            })\n            .setPin('.sticky-col')\n            .addTo(controller);\n\n          }\n\n        }, 2000);\n\n        $('body').addClass('sidebar-processed');\n      }\n\n\n      // Card - guida.\n      $('.card-view-more .btn').click(function(e) {\n        $(this).parent().prev().toggleClass('h-show');\n      });\n\n      // Card - visura full.\n      $('.card-visura-full .btn-collapse').click(function(e) {\n        $(this).closest('.card-visura-full').toggleClass('h-collapsed');\n      });\n\n      // Gallery.\n      $('.article.gallery').magnificPopup({\n        delegate: '.gallery-element',\n        type: 'image',\n        removalDelay: 500, //delay removal by X to allow out-animation\n        callbacks: {\n          beforeOpen: function() {\n            // just a hack that adds mfp-anim class to markup\n            this.st.image.markup = this.st.image.markup.replace('mfp-figure', 'mfp-figure mfp-with-anim');\n            this.st.mainClass = this.st.el.attr('data-effect');\n          }\n        },\n        tLoading: 'Loading image #%curr%...',\n        mainClass: 'mfp-img-mobile',\n        gallery: {\n          enabled: true,\n          navigateByImgClick: true,\n          preload: [0,1] // Will preload 0 - before current, and 1 after the current image\n        },\n        image: {\n          tError: '<a href=\"%url%\">The image #%curr%</a> could not be loaded.',\n          titleSrc: function(item) {\n            return item.el.attr('data-title');\n          },\n          markup: '<div class=\"mfp-figure\">'+\n          '<div class=\"mfp-counter\"></div>'+\n          '<div class=\"mfp-close\"></div>'+\n          '<div class=\"mfp-img\"></div>'+\n          '<div class=\"mfp-bottom-bar\">'+\n          '<div class=\"mfp-title\"></div>'+\n          '</div>'+\n          '</div>',\n        }\n      });\n\n      // Smooth scroll.\n      $('.sidebar a[href^=\"#\"]').off().click(function(e) {\n        e.preventDefault();\n        var position = $($(this).attr('href')).offset().top;\n\n        $('body, html').animate({\n          scrollTop: position\n        });\n      });\n\n      // Temp calendar.\n\n      if ($('.calendar-title').length === 0) {\n        var $title = $('.paragraph--type--calendario-eventi').find('.field--name-field-titolo');\n        $title.prependTo('.paragraph--type--calendario-eventi #calendar.processed').wrap('<h3 class=\"calendar-title\" />').contents().unwrap();\n      }\n\n\n    }\n  }\n\n})(jQuery);\n"]}